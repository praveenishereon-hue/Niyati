<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Niyati тАУ AI Astrology Chatbot</title>
  <style>
    body{font-family:system-ui,Arial;max-width:720px;margin:40px auto;padding:16px}
    h1{margin:0 0 8px 0}
    textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px}
    button{margin-top:10px;padding:10px 14px;border:0;border-radius:8px;cursor:pointer}
    .primary{background:#6b46c1;color:#fff}
    .bubble{white-space:pre-wrap;margin-top:16px;border:1px solid #eee;padding:12px;border-radius:10px}
  </style>
</head>
<body>
  <h1>ЁЯФо Niyati тАУ Your AI Astrology Guide</h1>
  <p>рдиреАрдЪреЗ рдЕрдкрдирд╛ рд╕рд╡рд╛рд▓ рд▓рд┐рдЦрд┐рдП рдФрд░ <b>рд╕рд┐рд░реНрдлрд╝ рд╣рд┐рдВрджреА</b> рдореЗрдВ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдкрд╛рдПрдБред</p>

  <textarea id="userInput" rows="4" placeholder="рдЙрджрд╛рд╣рд░рдг: рдореЗрд░рд╛ рдЖрдЬ рдХрд╛ рджрд┐рди рдХреИрд╕рд╛ рд░рд╣реЗрдЧрд╛?"></textarea>
  <button class="primary" onclick="sendMessage()">Ask Niyati</button>

  <div id="response" class="bubble"></div>

  <script>
    async function sendMessage() {
      const q = document.getElementById('userInput').value.trim();
      const out = document.getElementById('response');
      if (!q) { out.textContent = 'рдХреГрдкрдпрд╛ рдкрд╣рд▓реЗ рдЕрдкрдирд╛ рдкреНрд░рд╢реНрди рд▓рд┐рдЦреЗрдВ.'; return; }
      out.textContent = 'ЁЯФо Niyati рд╕реЛрдЪ рд░рд╣реА рд╣реИ...';

      try {
        const response = await fetch("https://niyati-api.vercel.app/api/niyati", {
          method: 'POST',
          headers: {
            'Authorization': 'Bearer ' + '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',
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            inputs:
`рдЖрдк рдПрдХ рдЕрдиреБрднрд╡реА рднрд╛рд░рддреАрдп рд╡реИрджрд┐рдХ рдЬреНрдпреЛрддрд┐рд╖реА рд╣реИрдВред
рдХреЗрд╡рд▓ *рд╣рд┐рдВрджреА* рдореЗрдВ рдЙрддреНрддрд░ рджреЗрдВ (рдЕрдВрдЧреНрд░реЗрдЬрд╝реА рд╢рдмреНрдж рди рд▓рд┐рдЦреЗрдВ)ред
рдЙрддреНрддрд░ 3тАУ5 рдЫреЛрдЯреА рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рджреЗрдВред
рдлреЙрд░реНрдореЗрдЯ:
- рд╕рд╛рд░:
- рдЕрдЧрд▓реЗ 24 рдШрдВрдЯреЗ:
- рд╕рд▓рд╛рд╣:

рдкреНрд░рд╢реНрди: ${q}
рдЙрддреНрддрд░:`.replace(/\\/g,''),
            parameters: { max_new_tokens: 180, temperature: 0.7 }
          })
        });

        if (!resp.ok) { out.textContent = 'тЪая╕П рд╕рд░реНрд╡рд░ рд╕реЗ рдЬрд╡рд╛рдм рдирд╣реАрдВ рдорд┐рд▓рд╛. рдмрд╛рдж рдореЗрдВ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ.'; return; }

        const data = await resp.json();
        let text = (Array.isArray(data) ? data[0]?.generated_text : data?.generated_text) || '';

        // Prompt dobara aa jaye to "рдЙрддреНрддрд░:" ke baad ka рд╣рд┐рд╕реНрд╕рд╛ рд▓реЛ
        if (text.includes('рдЙрддреНрддрд░:')) text = text.split('рдЙрддреНрддрд░:').pop().trim();

        // Safety: agar fir bhi English aa jaye to simple Hindi tag laga рджреЛ
        if (!/[рдЕ-рд╣рд║-ре┐]/.test(text)) text = 'тАв рдЖрдЬ рдзреИрд░реНрдп рд░рдЦреЗрдВред тАв рдЫреЛрдЯреЗ рдХрд╛рдо рдкреВрд░реЗ рд╣реЛрдВрдЧреЗред тАв рдХрд┐рд╕реА рд╡рд░рд┐рд╖реНрда рдХрд╛ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рд▓рд╛рдн рджреЗрдЧрд╛ред';

        out.textContent = 'тЬи ' + text;
      } catch (e) {
        out.textContent = 'тЪая╕П рдиреЗрдЯрд╡рд░реНрдХ рддреНрд░реБрдЯрд┐: ' + e.message;
      }
    }
  </script>
</body>
</html>
